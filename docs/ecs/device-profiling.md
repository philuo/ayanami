# Web ç«¯è®¾å¤‡æ€§èƒ½åˆ†æ

## èƒŒæ™¯é—®é¢˜

**Web ç«¯æ— æ³•ç›´æ¥è·å– CPU å‹å·** âŒ

```typescript
// è¿™äº›éƒ½ä¸å­˜åœ¨
navigator.cpuModel        // âŒ
navigator.cpuBrand        // âŒ
navigator.processorName   // âŒ

// åŸå› ï¼š
// 1. éšç§ä¿æŠ¤ï¼ˆé˜²æ­¢æŒ‡çº¹è¯†åˆ«ï¼‰
// 2. W3C æ ‡å‡†é™åˆ¶
// 3. æµè§ˆå™¨å®‰å…¨ç­–ç•¥
```

## è§£å†³æ–¹æ¡ˆï¼šæ€§èƒ½åŸºå‡†æµ‹è¯•

é€šè¿‡æ‰§è¡Œæ ‡å‡†åŒ–æµ‹è¯•æ¨æ–­è®¾å¤‡æ€§èƒ½ç­‰çº§ï¼Œé—´æ¥è¯†åˆ« CPU æ¡£æ¬¡ã€‚

## å¯è·å–çš„ä¿¡æ¯

```typescript
// âœ… é€»è¾‘æ ¸å¿ƒæ•°
navigator.hardwareConcurrency  // 8, 16, 24 ç­‰

// âœ… å†…å­˜ï¼ˆéƒ¨åˆ†æµè§ˆå™¨ï¼‰
navigator.deviceMemory  // 4, 8, 16 GB

// âœ… GPU ä¿¡æ¯
WEBGL_debug_renderer_info

// âœ… å¹³å°ä¿¡æ¯
navigator.platform  // "MacIntel", "Win32"
navigator.userAgent
```

## è®¾å¤‡åˆ†æå™¨

### å·¥ä½œæµç¨‹

```
1. æ”¶é›†ç¡¬ä»¶ä¿¡æ¯
   â”œâ”€ æ ¸å¿ƒæ•°
   â”œâ”€ å†…å­˜
   â””â”€ GPU

2. CPU æ€§èƒ½æµ‹è¯•
   â”œâ”€ æ•°å­¦è¿ç®— (Math.sqrt, Math.sin)
   â”œâ”€ æ•°ç»„æ“ä½œ (sort, map, filter)
   â””â”€ å­—ç¬¦ä¸²å¤„ç†

3. æ¨æ–­ CPU æ¶æ„
   â”œâ”€ Apple Silicon (M1/M2/M3)
   â”œâ”€ Intel (i5/i7/i9)
   â”œâ”€ AMD (Ryzen 5/7/9)
   â””â”€ Unknown

4. ç¡®å®šæ€§èƒ½ç­‰çº§
   â”œâ”€ High (80-100åˆ†)
   â”œâ”€ Medium (60-79åˆ†)
   â”œâ”€ Low (40-59åˆ†)
   â””â”€ Potato (0-39åˆ†)

5. æ¨èé€»è¾‘æ­¥é•¿
   â”œâ”€ 16ms (62.5Hz) - High
   â”œâ”€ 20ms (50Hz)   - Medium
   â”œâ”€ 25ms (40Hz)   - Low
   â””â”€ 33ms (30Hz)   - Potato
```

### æµ‹è¯•è¯¦æƒ…

#### 1. æ•°å­¦è¿ç®—æµ‹è¯•

```typescript
// 100ä¸‡æ¬¡æ•°å­¦è¿ç®—
for (let i = 0; i < 1000000; i++) {
  result += Math.sqrt(i) * Math.sin(i) * Math.cos(i);
}

// åŸºå‡†æ•°æ®ï¼š
// Apple M1:      ~30ms â†’ å¾—åˆ† 70
// Intel i7:      ~45ms â†’ å¾—åˆ† 55
// Intel i5-8250U:~60ms â†’ å¾—åˆ† 40
// ä½ç«¯è®¾å¤‡:      ~100ms â†’ å¾—åˆ† 0
```

#### 2. æ•°ç»„æ“ä½œæµ‹è¯•

```typescript
// 10ä¸‡ä¸ªå…ƒç´ çš„æ•°ç»„æ“ä½œ
const arr = Array.from({ length: 100000 }, (_, i) => i);
arr.sort((a, b) => b - a);
const mapped = arr.map(x => x * 2);
const filtered = mapped.filter(x => x % 3 === 0);
const sum = filtered.reduce((a, b) => a + b, 0);

// åŸºå‡†æ•°æ®ï¼š
// Apple M1:  ~15ms â†’ å¾—åˆ† 70
// Intel i7:  ~25ms â†’ å¾—åˆ† 50
// Intel i5:  ~35ms â†’ å¾—åˆ† 30
```

#### 3. å­—ç¬¦ä¸²æ“ä½œæµ‹è¯•

```typescript
// 1ä¸‡æ¬¡å­—ç¬¦ä¸²æ‹¼æ¥å’Œæˆªå–
let str = '';
for (let i = 0; i < 10000; i++) {
  str += 'test' + i;
  if (i % 100 === 0) {
    str = str.substring(0, 1000);
  }
}

// åŸºå‡†æ•°æ®ç±»ä¼¼
```

### CPU æ¶æ„æ¨æ–­

```typescript
// Apple Silicon (M1/M2/M3)
æ¡ä»¶ï¼šMacIntel + æ ¸å¿ƒâ‰¥8 + å¾—åˆ†>80
ç‰¹å¾ï¼šæ€§èƒ½æ ¸ + èƒ½æ•ˆæ ¸ æ¶æ„

// Intel é«˜ç«¯ (i7/i9)
æ¡ä»¶ï¼šæ ¸å¿ƒâ‰¥8 + å¾—åˆ†70-80
ç‰¹å¾ï¼šé«˜æ€§èƒ½å¤šæ ¸

// Intel ä¸­ç«¯ (i5)
æ¡ä»¶ï¼šæ ¸å¿ƒâ‰¥4 + å¾—åˆ†50-70
ç‰¹å¾ï¼šæ ‡å‡†æ€§èƒ½

// AMD é«˜ç«¯ (Ryzen 7/9)
æ¡ä»¶ï¼šæ ¸å¿ƒâ‰¥12 + å¾—åˆ†>70
ç‰¹å¾ï¼šå¤šæ ¸ä¼˜åŠ¿

// AMD ä¸­ç«¯ (Ryzen 5)
æ¡ä»¶ï¼šæ ¸å¿ƒâ‰¥6 + å¾—åˆ†>60
ç‰¹å¾ï¼šæ€§ä»·æ¯”
```

## ä½¿ç”¨æ–¹æ³•

### è‡ªåŠ¨åˆ†æï¼ˆå·²é›†æˆï¼‰

å•æœºæ¨¡å¼å¯åŠ¨æ—¶è‡ªåŠ¨æ‰§è¡Œï¼š

```typescript
// configs/index.ts
game: {
  mode: 'single',
  single: {
    use_adaptive: true  // ğŸ‘ˆ è‡ªåŠ¨åˆ†æè®¾å¤‡
  }
}

// å¯åŠ¨æ—¶æ§åˆ¶å°è¾“å‡ºï¼š
// ğŸ” å¼€å§‹è®¾å¤‡æ€§èƒ½åˆ†æ...
// â±ï¸ CPU åŸºå‡†æµ‹è¯•ä¸­...
//   æ•°å­¦è¿ç®—: 75.2
//   æ•°ç»„æ“ä½œ: 72.8
//   å­—ç¬¦ä¸²:   68.5
//   ç»¼åˆ:     72.2
// âœ… è®¾å¤‡åˆ†æå®Œæˆ (è€—æ—¶ 287ms)
// ğŸ“Š è®¾å¤‡æ¡£æ¡ˆ: {
//   tier: 'high',
//   score: 78,
//   cores: 8,
//   memory: 16,
//   cpu_arch: 'apple_silicon',
//   recommended_step: 16
// }
// ğŸ“Š æ ¹æ®è®¾å¤‡æ¡£æ¡ˆé€‰æ‹©åˆå§‹æ­¥é•¿: é«˜æ€§èƒ½ (62.5Hz)
```

### æ‰‹åŠ¨åˆ†æ

```javascript
// æµè§ˆå™¨æ§åˆ¶å°

// æŸ¥çœ‹å½“å‰æ¡£æ¡ˆ
__device__.getProfile()

// é‡æ–°åˆ†æï¼ˆæ¸…é™¤ç¼“å­˜ï¼‰
__device__.clear()
await __device__.analyze()

// ä¿å­˜æ¡£æ¡ˆ
__device__.save()
```

### æ¡£æ¡ˆç»“æ„

```typescript
{
  tier: 'high' | 'medium' | 'low' | 'potato',
  score: 78,               // ç»¼åˆå¾—åˆ† 0-100
  cores: 8,                // é€»è¾‘æ ¸å¿ƒæ•°
  memory: 16,              // å†…å­˜ GBï¼ˆå¯é€‰ï¼‰
  cpu_arch: 'apple_silicon',  // CPU æ¶æ„ï¼ˆæ¨æ–­ï¼‰
  gpu: 'Apple M1',         // GPU ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰
  recommended_step: 16     // æ¨èæ­¥é•¿
}
```

## æ€§èƒ½å¼€é”€

```
é¦–æ¬¡åˆ†æ: ~300msï¼ˆå¯åŠ¨æ—¶æ‰§è¡Œä¸€æ¬¡ï¼‰
ç¼“å­˜è¯»å–: <1ms
å†…å­˜å ç”¨: <5KB
```

ç¼“å­˜ç­–ç•¥ï¼š
- é¦–æ¬¡åˆ†æåä¿å­˜åˆ° localStorage
- åç»­å¯åŠ¨ç›´æ¥è¯»å–ç¼“å­˜
- å¼€å‘æ¨¡å¼æ¯æ¬¡é‡æ–°åˆ†æï¼ˆç¡®ä¿å‡†ç¡®ï¼‰
- ç”Ÿäº§æ¨¡å¼ä½¿ç”¨ç¼“å­˜ï¼ˆå‡å°‘å¯åŠ¨æ—¶é—´ï¼‰

## å®é™…æ¡ˆä¾‹

### æ¡ˆä¾‹1: Apple M1 MacBook Pro

```
æ£€æµ‹ç»“æœ:
  æ ¸å¿ƒ: 8 (4P + 4E)
  å†…å­˜: 16GB
  ç»¼åˆå¾—åˆ†: 82
  æ¶æ„: apple_silicon
  ç­‰çº§: high

æ¨èé…ç½®:
  é€»è¾‘æ­¥é•¿: 16ms (62.5Hz)
  
å®é™…ä½“éªŒ:
  âœ… æµç•…è¿è¡Œåœ¨ 62.5Hz
  âœ… æ¸²æŸ“å¯è¾¾ 120Hz+
  âœ… é€»è¾‘è€—æ—¶ < 12ms
```

### æ¡ˆä¾‹2: Intel i5-8250U ç¬”è®°æœ¬

```
æ£€æµ‹ç»“æœ:
  æ ¸å¿ƒ: 8 (4C8T)
  å†…å­˜: 8GB
  ç»¼åˆå¾—åˆ†: 58
  æ¶æ„: intel_mid
  ç­‰çº§: medium

æ¨èé…ç½®:
  é€»è¾‘æ­¥é•¿: 20ms (50Hz)
  
å®é™…ä½“éªŒ:
  âœ… ç¨³å®šè¿è¡Œåœ¨ 50Hz
  âœ… æ¸²æŸ“ 60Hz
  âœ… é€»è¾‘è€—æ—¶ ~15ms
```

### æ¡ˆä¾‹3: è€æ—§ç¬”è®°æœ¬

```
æ£€æµ‹ç»“æœ:
  æ ¸å¿ƒ: 4
  å†…å­˜: 4GB
  ç»¼åˆå¾—åˆ†: 35
  æ¶æ„: unknown
  ç­‰çº§: low

æ¨èé…ç½®:
  é€»è¾‘æ­¥é•¿: 25ms (40Hz)
  
å®é™…ä½“éªŒ:
  âœ… å‹‰å¼ºæµç•… 40Hz
  âš ï¸ æ¸²æŸ“å¶å°”æ‰å¸§
  âš ï¸ é€»è¾‘è€—æ—¶ ~20ms
```

## å‡†ç¡®æ€§

### æ¨æ–­å‡†ç¡®ç‡

```
Apple Silicon:  95%+ ï¼ˆç‰¹å¾æ˜æ˜¾ï¼‰
Intel é«˜ç«¯:     80%
Intel ä¸­ç«¯:     75%
AMD é«˜ç«¯:       70%
å…¶ä»–:          50%
```

### è¯¯åˆ¤æƒ…å†µ

```
1. è™šæ‹Ÿæœº/æ¨¡æ‹Ÿå™¨
   - æ ¸å¿ƒæ•°å’Œæ€§èƒ½ä¸åŒ¹é…
   - å»ºè®®ï¼šå›é€€åˆ°ä¿å®ˆç­–ç•¥

2. æµè§ˆå™¨èŠ‚æµ
   - çœç”µæ¨¡å¼å½±å“æµ‹è¯•
   - å»ºè®®ï¼šå¤šæ¬¡æµ‹è¯•å–å¹³å‡

3. åå°ä»»åŠ¡
   - CPU è¢«å ç”¨å¯¼è‡´æµ‹è¯•æ…¢
   - å»ºè®®ï¼šå¯åŠ¨æ—¶æµ‹è¯•ï¼ˆè´Ÿè½½ä½ï¼‰
```

## ä¸è‡ªé€‚åº”æ­¥é•¿çš„æ•´åˆ

```typescript
å¯åŠ¨æµç¨‹ï¼š
1. æ£€æŸ¥ç¼“å­˜ â†’ æœ‰æ¡£æ¡ˆï¼Ÿ
   â”œâ”€ æ˜¯ â†’ ä½¿ç”¨ç¼“å­˜æ¡£æ¡ˆ
   â””â”€ å¦ â†’ æ‰§è¡Œæ€§èƒ½æµ‹è¯•

2. åˆ›å»ºè‡ªé€‚åº”ç®¡ç†å™¨
   â”œâ”€ æ ¹æ®æ¡£æ¡ˆé€‰æ‹©åˆå§‹æ­¥é•¿
   â””â”€ åç»­æ ¹æ® rAF ç»§ç»­ä¼˜åŒ–

3. è¿è¡Œæ—¶è°ƒæ•´
   â”œâ”€ åˆå§‹ï¼šæ¡£æ¡ˆæ¨èæ­¥é•¿
   â”œâ”€ 2ç§’åï¼šæ”¶é›† rAF æ•°æ®
   â””â”€ 5ç§’åï¼šæœ€ç»ˆæ ¡å‡†

ç»“æœï¼š
  æ¡£æ¡ˆæ¨è: å¿«é€Ÿå¯åŠ¨ï¼Œæ¥è¿‘æœ€ä¼˜
  rAF æ ¡å‡†: æŒç»­ä¼˜åŒ–ï¼Œè¾¾åˆ°æœ€ä¼˜
```

## è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹å®Œæ•´åˆ†æè¿‡ç¨‹

```javascript
// æ¸…é™¤ç¼“å­˜ï¼Œé‡æ–°åˆ†æ
__device__.clear()

// æ‰§è¡Œåˆ†æï¼ˆæŸ¥çœ‹è¯¦ç»†è¾“å‡ºï¼‰
await __device__.analyze()

// è¾“å‡ºï¼š
// ğŸ” å¼€å§‹è®¾å¤‡æ€§èƒ½åˆ†æ...
// â±ï¸ CPU åŸºå‡†æµ‹è¯•ä¸­...
//   æ•°å­¦è¿ç®—: 75.2
//   æ•°ç»„æ“ä½œ: 72.8
//   å­—ç¬¦ä¸²:   68.5
//   ç»¼åˆ:     72.2
// âœ… è®¾å¤‡åˆ†æå®Œæˆ (è€—æ—¶ 287ms)
// ğŸ“Š è®¾å¤‡æ¡£æ¡ˆ: {...}
```

### å¯¹æ¯”ä¸åŒè®¾å¤‡

```javascript
// è®¾å¤‡A
const profileA = await deviceProfiler.analyze();

// åˆ‡æ¢åˆ°è®¾å¤‡Bï¼Œåœ¨å…¶ä¸Šæ‰§è¡Œ
const profileB = await deviceProfiler.analyze();

// å¯¹æ¯”
console.table([profileA, profileB]);
```

### å¼ºåˆ¶ç‰¹å®šæ­¥é•¿

```javascript
// å¿½ç•¥æ¡£æ¡ˆæ¨èï¼Œå¼ºåˆ¶ä½¿ç”¨ç‰¹å®šæ­¥é•¿
const profile = __device__.getProfile();
profile.recommended_step = 16;  // å¼ºåˆ¶ 62.5Hz

// éœ€è¦é‡å¯æ¸¸æˆæ‰ç”Ÿæ•ˆ
```

## éšç§è€ƒè™‘

**æ‰€æœ‰æ•°æ®ä»…åœ¨æœ¬åœ°ä½¿ç”¨**ï¼š

```
âœ… æµ‹è¯•åœ¨æµè§ˆå™¨æœ¬åœ°æ‰§è¡Œ
âœ… ç»“æœä¿å­˜åœ¨ localStorage
âœ… ä¸å‘é€åˆ°æœåŠ¡å™¨
âœ… ä¸ç”¨äºæŒ‡çº¹è¯†åˆ«
âœ… ç”¨æˆ·å¯éšæ—¶æ¸…é™¤
```

æ¸…é™¤æ–¹æ³•ï¼š

```javascript
// ä»£ç æ¸…é™¤
__device__.clear()

// æ‰‹åŠ¨æ¸…é™¤
localStorage.removeItem('device_profile')
```

## å¯¹æ¯”å…¶ä»–æ–¹æ¡ˆ

### æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | å‡†ç¡®æ€§ | å¼€é”€ | éšç§ | å®ç°éš¾åº¦ |
|------|--------|------|------|----------|
| **æ€§èƒ½æµ‹è¯•** | â­â­â­â­ | â­â­â­â­ | â­â­â­â­â­ | â­â­â­ |
| User-Agent | â­â­ | â­â­â­â­â­ | â­â­â­ | â­â­â­â­â­ |
| æœåŠ¡å™¨æ•°æ®åº“ | â­â­â­ | â­â­â­â­â­ | â­â­ | â­â­ |
| WebAssembly | â­â­â­â­â­ | â­â­â­ | â­â­â­â­â­ | â­ |

### ä¸ºä»€ä¹ˆé€‰æ‹©æ€§èƒ½æµ‹è¯•ï¼Ÿ

```
âœ… å‡†ç¡®ï¼šç›´æ¥æµ‹é‡å®é™…æ€§èƒ½
âœ… å¿«é€Ÿï¼š~300msï¼Œå¯æ¥å—
âœ… éšç§ï¼šå®Œå…¨æœ¬åœ°ï¼Œä¸æ³„éœ²
âœ… å¯é ï¼šä¸ä¾èµ– UA å­—ç¬¦ä¸²
âœ… è‡ªé€‚åº”ï¼šèƒ½åº”å¯¹æ–°è®¾å¤‡
```

## æœªæ¥æ”¹è¿›

### å¯èƒ½çš„ä¼˜åŒ–

1. **æ›´å¤šæµ‹è¯•ç»´åº¦**
   ```
   - WebGL æ€§èƒ½æµ‹è¯•
   - Worker å¹¶è¡Œèƒ½åŠ›
   - SharedArrayBuffer æ€§èƒ½
   ```

2. **æœºå™¨å­¦ä¹ **
   ```
   - æ”¶é›†åŒ¿åç»Ÿè®¡æ•°æ®
   - è®­ç»ƒåˆ†ç±»æ¨¡å‹
   - æ›´å‡†ç¡®çš„æ¶æ„è¯†åˆ«
   ```

3. **åŠ¨æ€è°ƒæ•´**
   ```
   - è¿è¡Œæ—¶æ€§èƒ½ç›‘æ§
   - å‘ç°æ€§èƒ½ä¸‹é™è‡ªåŠ¨é™çº§
   - æ¸©åº¦èŠ‚æµæ£€æµ‹
   ```

## æ€»ç»“

### æ ¸å¿ƒä»·å€¼

```
é—®é¢˜ï¼šWeb æ— æ³•è·å– CPU å‹å·
æ–¹æ¡ˆï¼šæ€§èƒ½æµ‹è¯• + é—´æ¥æ¨æ–­
ç»“æœï¼šå‡†ç¡®è¯†åˆ«è®¾å¤‡ç­‰çº§

æ”¶ç›Šï¼š
âœ… æ™ºèƒ½é€‰æ‹©åˆå§‹æ­¥é•¿
âœ… å‡å°‘æ ¡å‡†æ—¶é—´
âœ… æ›´å¥½çš„é¦–æ¬¡ä½“éªŒ
âœ… é€‚é…å„ç§è®¾å¤‡
```

### ä½¿ç”¨å»ºè®®

```
å•æœºæ¸¸æˆï¼šâœ… å¼ºçƒˆæ¨è
ç½‘æ¸¸æ¸¸æˆï¼šâš ï¸ ä»…ä¾›å‚è€ƒï¼ˆé€»è¾‘æ­¥é•¿å›ºå®šï¼‰
å¼€å‘è°ƒè¯•ï¼šâœ… æœ‰åŠ©äºäº†è§£ç›®æ ‡è®¾å¤‡
æ€§èƒ½ä¼˜åŒ–ï¼šâœ… æä¾›æ€§èƒ½åŸºå‡†
```

### æœ€ä½³å®è·µ

1. **ä¿¡ä»»ä½†éªŒè¯**ï¼šè®¾å¤‡æ¡£æ¡ˆä½œä¸ºèµ·ç‚¹ï¼ŒrAF æ•°æ®ä½œä¸ºæ ¡å‡†
2. **ç¼“å­˜ç­–ç•¥**ï¼šç”Ÿäº§ç¯å¢ƒä½¿ç”¨ç¼“å­˜ï¼Œå¼€å‘ç¯å¢ƒé‡æ–°æµ‹è¯•
3. **é™çº§ä¿æŠ¤**ï¼šå¦‚æœæ¨æ–­é”™è¯¯ï¼Œè‡ªé€‚åº”ç³»ç»Ÿä¼šè‡ªåŠ¨ä¿®æ­£
4. **ç”¨æˆ·å¯æ§**ï¼šæä¾›æ¸…é™¤ç¼“å­˜çš„é€‰é¡¹

---

**è®°ä½ï¼šè¿™æ˜¯è¾…åŠ©æ‰‹æ®µï¼Œä¸æ˜¯å”¯ä¸€ä¾æ®ï¼** 
æœ€ç»ˆçš„æ­¥é•¿é€‰æ‹©ä»ç„¶è¦åŸºäºå®é™…çš„ rAF è¡¨ç°ã€‚ğŸ¯

